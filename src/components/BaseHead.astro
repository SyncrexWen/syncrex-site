---
// src/components/BaseHead.astro
import '../styles/global.css';
// ... (其他 imports 和 props 保持不变) ...

const { title, description } = Astro.props;
// ...
---

<style is:global>
  /* 默认/初始状态：如果没有 data-lang，优先隐藏英文 */
  :root:not([data-lang]) .lang-en,
  :root:not([data-lang]) .hidden-when-zh {
    display: none !important;
  }

  /* 当 html="zh" 时，隐藏 .lang-en 和 .hidden-when-zh */
  :root[data-lang="zh"] .lang-en,
  :root[data-lang="zh"] .hidden-when-zh {
    display: none !important;
  }

  /* 当 html="en" 时，隐藏 .lang-zh 和 .hidden-when-en */
  :root[data-lang="en"] .lang-zh,
  :root[data-lang="en"] .hidden-when-en {
    display: none !important;
  }
</style>

<script is:inline>
  (function() {
    try {
      var lang = localStorage.getItem('site-lang') || 'zh';
      document.documentElement.setAttribute('data-lang', lang);
    } catch (e) {
      document.documentElement.setAttribute('data-lang', 'zh');
    }
  })();
</script>
