---
// src/components/BackButton.astro

/**
 * BackButton Component
 * * A reusable navigation button with animated arrow icons.
 * Supports different visual themes for various backgrounds.
 */
interface Props {
  /** The URL to navigate to. */
  href: string;
  /** Label text. Defaults to "Back". */
  text?: string;
  /** * Visual theme:
   * - 'light': Solid outline, best for white backgrounds.
   * - 'dark': Frosted glass effect, best for dark/image backgrounds.
   */
  theme?: 'dark' | 'light';
}

const { href, text = "Back", theme = 'light' } = Astro.props;
---

<a href={href} class:list={["back-button group", theme]}>
  <div class="icon-wrapper">
    <svg
      xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
      fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="arrow-main"
    >
      <line x1="19" y1="12" x2="5" y2="12"></line>
      <polyline points="12 19 5 12 12 5"></polyline>
    </svg>

    <svg
      xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
      fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="arrow-clone"
    >
      <line x1="19" y1="12" x2="5" y2="12"></line>
      <polyline points="12 19 5 12 12 5"></polyline>
    </svg>
  </div>
  <span class="label">{text}</span>
</a>

<style>
  .back-button {
    /* Use local variable for easy theme extension */
    --btn-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.6rem 1.2rem;
    border-radius: 99px;

    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 500;
    letter-spacing: 0.02em;
    transition: var(--btn-transition);
    position: relative;
    overflow: hidden;
  }

  /* ---------------------------------------------------------
    THEME: Light
    Style: Outline -> Filled on hover
     --------------------------------------------------------- */
  .back-button.light {
    background: transparent;
    border: 1px solid rgb(var(--theme-color-primary) / 0.2);
    color: rgb(var(--theme-color-primary));
  }

  .back-button.light:hover {
    background: rgb(var(--theme-color-primary));
    border-color: rgb(var(--theme-color-primary));
    color: #ffffff;
    box-shadow: 0 4px 12px rgb(var(--theme-color-primary) / 0.2);
    transform: translateX(-4px);
  }

  /* ---------------------------------------------------------
    THEME: Dark
    Style: Frosted Glass -> Stronger Glow on hover
     --------------------------------------------------------- */
  .back-button.dark {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.8);
  }

  .back-button.dark:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.3);
    color: #ffffff;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
    transform: translateX(-4px);
  }

  /* ---------------------------------------------------------
     ANIMATION: Arrow Slide
     --------------------------------------------------------- */
  .icon-wrapper {
    position: relative;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  svg {
    position: absolute;
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s;
  }

  /* State: Default */
  .arrow-main { transform: translateX(0); opacity: 1; }
  .arrow-clone { transform: translateX(20px); opacity: 0; }

  /* State: Hover */
  .back-button:hover .arrow-main { transform: translateX(-20px); opacity: 0; }
  .back-button:hover .arrow-clone { transform: translateX(0); opacity: 1; }
</style>
