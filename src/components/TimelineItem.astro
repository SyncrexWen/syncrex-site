---
// src/components/timeline/TimelineItem.astro

/**
 * TimelineItem
 * This component represents a single item in a timeline, such as a blog post or thought entry.
 * It displays the title, publication date, and an optional description.
 * Each item is a link that navigates to the full content of the post.
 * Props:
 * - post: A collection entry object containing the data for the timeline item (title, description, pubDate, slug).
 * - slugBase: A string that indicates the base path for the link (e.g., 'blogs' or 'thoughts').
 * Usage:
 * <TimelineItem post={post} slugBase="blogs" />
 */

import type { CollectionEntry } from 'astro:content';

interface Props {
    post: CollectionEntry<'blogs'> | CollectionEntry<'thoughts'>;
    slugBase: string;
}

const { post, slugBase } = Astro.props;
const { title, description, pubDate } = post.data;

const formattedDate = pubDate.toLocaleDateString('en-US', {
    month: 'numeric',
    day: 'numeric',
});
---

<a
    href={`/${slugBase}/${post.slug}`}
    class="group block relative pl-6 py-1.5 hover:bg-slate-50/80 rounded-r-lg transition-all duration-200"
>
    <div
        class="absolute -left-[6px] top-[0.8rem] w-3 h-3 bg-white border-2 border-slate-300 rounded-full group-hover:border-[#2d3748] group-hover:bg-[#2d3748] transition-colors duration-200 z-10"
    >
    </div>

    <article>
        <header class="flex flex-wrap items-baseline gap-x-3">
            <h3 class="text-lg font-bold text-slate-700 group-hover:text-[#2d3748] leading-tight">
                {title}
            </h3>

            <time datetime={pubDate.toISOString()} class="text-xs font-mono text-slate-400 italic">
                {formattedDate}
            </time>
        </header>

        {
            description && (
                <p class="text-slate-500 text-sm leading-snug mt-0.5 line-clamp-1 opacity-80 group-hover:opacity-100">
                    {description}
                </p>
            )
        }
    </article>
</a>
